<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	>
	
	<h:head>
		<title>Agence ALP Administrateur</title>
		</h:head>
	<h:body bgcolor="white">
	<ui:decorate template="/WEB-INF/templates/BasicTemplate.xhtml">
	<ui:define name="content">
	
	    <p:menubar>
            <p:submenu label="Gestion des Clients" icon="pi pi-users">
                <p:menuitem value="Créer un nouveau client"
                    url="gestionClient.xhtml" />
                <p:menuitem value="Liste des clients" url="gestionClient.xhtml" />
            </p:submenu>

            <p:submenu label="Gestion des Voitures" icon="pi pi-home">
                <p:menuitem value="Ajouter une voiture" url="gestionVoiture.xhtml" />
                <p:menuitem value="Liste des voitures" url="gestionVoiture.xhtml" />
            </p:submenu>

            <f:facet name="options">
                <p:inputText style="margin:1px 10px 1px 1px;" placeholder="Search" />
                <p:commandButton type="button" value="Logout" icon="pi pi-home" />
            </f:facet>
        </p:menubar>
	
	<center>
	<h1> Ajouter un Client</h1>
	<hr />
	
	<h:form>
		<p:panelGrid columns="2">
			<f:facet name="header">  
               Ajouter un client 
         	 </f:facet>
         	 <h:outputLabel for="id_personne" value="ID" />
			<p:inputText id="id_personne" value="#{managerClient.id_personne}" />
			
			<h:outputLabel for="nom" value="Nom" />
			<p:inputText id="nom" value="#{managerClient.nom}" />
	
			<h:outputLabel for="prenom" value="Prenom" />
			<p:inputText id="prenom" value="#{managerClient.prenom}" />
	
			<h:outputLabel for="login" value="Login" />
			<p:inputText id="login" value="#{managerClient.login}" />
			
			<h:outputLabel for="password" value="Password" />
			<p:inputText id="password" value="#{managerClient.password}" />
			
			<h:outputLabel for="numero_permis" value="Numéro de Permis" />
			<p:inputText id="numero_permis" value="#{managerClient.numero_permis}" />
		 
			
			<h:outputLabel for="telephone" value="n° de tédtgléphone" />
			<p:inputText id="telephone" value="#{managerClient.telephone}" />
	</p:panelGrid>
	<br/>
	<p:commandButton action="#{managerClient.save}" ajax="false"  update="mydata" value="Save" icon="ui-icon-check" style="margin:0" />
	</h:form>
	</center>	
	<hr/>
	<center>
		<h1>Liste des clients</h1>
			<hr/>
			
		 <h:form id="form">
    		<p:growl id="msgs" showDetail="true"/>
    	
		<p:dataTable value="#{managerClient.cacheList}" var="item" id="mydata" editable="true"
		selectionMode="single" selection="#{managerClient.selectedPers}" rowKey="#{item.id_personne}">
		
		<p:ajax event="rowEdit" listener="#{managerClient.editPersonne}" update=":form:msgs" />
        <p:ajax event="rowEditCancel" listener="#{managerClient.onRowCancel}" update=":form:msgs" />
        
		<p:column  headerText="Id">
		 <p:cellEditor>
                <f:facet name="output"><h:outputText value="#{item.id_personne}" /></f:facet>
                <f:facet name="input"><p:inputText id="idPersonne" value="#{item.id_personne}" style="width:100%"/></f:facet>
            </p:cellEditor>
		</p:column>
		<p:column headerText="Nom">
			 <p:cellEditor>
                <f:facet name="output"><h:outputText value="#{item.nom}" /></f:facet>
                <f:facet name="input"><p:inputText id="nom" value="#{item.nom}" style="width:100%"/></f:facet>
            </p:cellEditor>
		</p:column>
		<p:column  headerText="Prénom">
			<p:cellEditor>
                <f:facet name="output"><h:outputText value="#{item.prenom}" /></f:facet>
                <f:facet name="input"><p:inputText id="prenom" value="#{item.prenom}" style="width:100%"/></f:facet>
            </p:cellEditor>
		</p:column>
		<p:column  headerText="Login">
			<p:cellEditor>
                <f:facet name="output"><h:outputText value="#{item.login}" /></f:facet>
                <f:facet name="input"><p:inputText id="login" value="#{item.login}" style="width:100%"/></f:facet>
            </p:cellEditor>
		</p:column>
		<p:column  headerText="Password">
			<p:cellEditor>
                <f:facet name="output"><h:outputText value="#{item.password}" /></f:facet>
                <f:facet name="input"><p:inputText id="password" value="#{item.password}" style="width:100%"/></f:facet>
            </p:cellEditor>
		</p:column>
		<p:column  headerText="N° de permis">
			<p:cellEditor>
                <f:facet name="output"><h:outputText value="#{item.numero_permis}" /></f:facet>
                <f:facet name="input"><p:inputText id="numPermis" value="#{item.numero_permis}" style="width:100%"/></f:facet>
            </p:cellEditor>
		</p:column>
		<p:column  headerText="N° de téléphone">
			<p:cellEditor>
                <f:facet name="output"><h:outputText value="#{item.telephone}" /></f:facet>
                <f:facet name="input"><p:inputText id="numTel" value="#{item.telephone}" style="width:100%"/></f:facet>
            </p:cellEditor>
		</p:column>
		<p:column>
				<p:rowEditor />
		
		</p:column>

	</p:dataTable>
	</h:form>	
	</center>
	</ui:define>
	</ui:decorate>
	</h:body>
</html>